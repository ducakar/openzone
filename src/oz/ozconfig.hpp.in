#pragma once

// enable new and delete to save stack traces to show memory leaks
#cmakedefine OZ_TRACE_LEAKS

// enable Pool allocator; otherwise just call Alloc::alloc/dealloc
#cmakedefine OZ_POOL_ALLOC

// whether math library has sincosf function
#cmakedefine OZ_HAVE_SINCOSF

// use big-endian for stream
#cmakedefine OZ_BIG_ENDIAN_STREAM

// we are compiling with MinGW for Windows platform
#cmakedefine OZ_MINGW

#if defined( __clang__ )
# if __clang_major__ < 2 || ( __clang_major__ == 2 && __clang_minor__ < 9 )
#  error gcc >= 4.5 and clang 2.9 are the only supported compilers
# elif __clang_major__ == 2 && __clang_minor__ == 9
#  undef __GXX_EXPERIMENTAL_CXX0X__
# endif
#elif defined( __GNUC__ )
# if __GNUC__ < 4 || ( __GNUC__ == 4 && __GNUC_MINOR__ < 5 )
#  error gcc >= 4.5 and clang 2.9 are the only supported compilers
# elif __GNUC__ == 4 && __GNUC_MINOR__ == 5
#  define nullptr __null
# endif
#else
# error gcc >= 4.5 and clang 2.9 are the only supported compilers
#endif

// OZ_ECLIPSE_HIGHLIGHTING should never be enabled for compiler to process it, it is only intended
// for Eclipse IDE to properly highlight custom keywords.
// You should set OZ_ECLIPSE_HIGHLIGHTING to 1 in your projects settings.
#ifdef OZ_ECLIPSE_HIGHLIGHTING
// C++0x reserved words
# define constexpr
# define noexcept      throw()
# define nullptr        __null
// <cstddef>
# define nullptr_t      nullptr_t
# define ptrdiff_t      ptrdiff_t
# define size_t         size_t
// custom
# define nil_t          nil_t
# define nil            nil
# define null           null
# define byte           byte
# define ubyte          ubyte
# define ushort         ushort
# define uint           uint
# define ulong          ulong
# define long64         long64
# define ulong64        ulong64
#endif

// machine endian
#ifdef __BIG_ENDIAN__
# define OZ_BIG_ENDIAN_ARCH
#endif

// long and pointer sizes
#ifndef __LP64__
# define OZ_LONG_32
#endif

#if !defined( __LP64__ ) && !defined( __LLP64__ )
# define OZ_POINTER_32
#endif

#define OZ_ALWAYS_INLINE __attribute__(( always_inline ))
#define OZ_WEAK_SYMBOL   __attribute__(( weak ))
#define OZ_THREAD_LOCAL  __thread
